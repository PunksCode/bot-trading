<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Bot Trading AI V2 - Linux GPU</title>
    <style>
        body { background-color: #0b0e11; color: #eaecef; font-family: 'Segoe UI', Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background-color: #1e2329; padding: 30px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 380px; text-align: center; border: 1px solid #2b3139; }
        h1 { color: #f0b90b; margin-bottom: 5px; font-size: 22px; text-transform: uppercase; letter-spacing: 1px; }
        .subtitle { color: #848e9c; font-size: 14px; margin-bottom: 25px; }
        
        .price-box { margin-bottom: 20px; }
        .price-label { font-size: 12px; color: #848e9c; text-transform: uppercase; }
        .price-val { font-size: 28px; font-weight: bold; letter-spacing: 1px; }
        
        .prediction-box { background-color: #2b3139; padding: 20px; border-radius: 12px; margin-top: 20px; border: 1px solid #474d57; }
        
        .bullish { color: #0ecb81; } /* Verde */
        .bearish { color: #f6465d; } /* Rojo */
        
        .indicators { display: flex; justify-content: space-between; margin-top: 15px; font-size: 13px; }
        .ind-item { background: #161a1e; padding: 8px; border-radius: 6px; width: 45%; }
        .ind-val { font-weight: bold; display: block; margin-top: 4px; color: #eaecef; }

        button { background-color: #f0b90b; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 25px; width: 100%; font-size: 16px; transition: 0.2s; }
        button:hover { background-color: #d1a106; transform: translateY(-2px); }
        .loading { opacity: 0.6; animation: blink 1s infinite; }
        
        @keyframes blink { 50% { opacity: 0.3; } }
    </style>
</head>
<body>

    <div class="card">
        <h1>ðŸ¤– AI Trader V2</h1>
        <p class="subtitle">Neural Network â€¢ Multi-Indicator â€¢ GPU</p>
        
        <div id="result">
            <p class="loading">Iniciando sistemas...</p>
        </div>

        <button onclick="consultarIA()">ðŸ“¡ Analizar Mercado</button>
    </div>

    <script>
        async function consultarIA() {
            const display = document.getElementById('result');
            const btn = document.querySelector('button');
            
            display.style.opacity = '0.5';
            btn.innerText = "Pensando...";
            btn.disabled = true;
            
            try {
                const response = await fetch('/api/predict/');
                const data = await response.json();

                if (data.error) {
                    display.innerHTML = `<p style="color:#f6465d">Error: ${data.error}</p>`;
                } else {
                    const colorClass = data.tendencia.includes("ALCISTA") ? "bullish" : "bearish";
                    
                    // LÃ³gica visual para RSI
                    let rsiColor = "#eaecef";
                    if(data.indicadores.rsi > 70) rsiColor = "#f6465d"; // Sobrecompra (Peligro)
                    if(data.indicadores.rsi < 30) rsiColor = "#0ecb81"; // Sobreventa (Oportunidad)

                    display.innerHTML = `
                        <div class="price-box">
                            <div class="price-label">Precio Actual (BTC)</div>
                            <div class="price-val">$${data.precio_actual.toLocaleString()}</div>
                        </div>

                        <div class="prediction-box">
                            <div class="price-label">PredicciÃ³n 24H</div>
                            <div class="price-val ${colorClass}">$${data.prediccion_maÃ±ana.toLocaleString()}</div>
                            <div style="margin-top:5px; font-weight:bold" class="${colorClass}">
                                ${data.tendencia} (${data.porcentaje}%)
                            </div>

                            <div class="indicators">
                                <div class="ind-item">
                                    <span style="color:#848e9c">RSI (14)</span>
                                    <span class="ind-val" style="color:${rsiColor}">${data.indicadores.rsi}</span>
                                </div>
                                <div class="ind-item">
                                    <span style="color:#848e9c">Volatilidad</span>
                                    <span class="ind-val">${data.indicadores.volatilidad}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error(error);
                display.innerHTML = '<p style="color:#f6465d">Error de conexiÃ³n con el servidor.</p>';
            } finally {
                display.style.opacity = '1';
                btn.innerText = "ðŸ“¡ Analizar Mercado";
                btn.disabled = false;
            }
        }

        consultarIA();
    </script>

</body>
</html>